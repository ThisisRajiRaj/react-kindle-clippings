(this["webpackJsonpreact-kindle-clippings-example"]=this["webpackJsonpreact-kindle-clippings-example"]||[]).push([[0],{13:function(e,t,n){e.exports=n(26)},25:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(9),o=n.n(a),l=n(7),s=n(11),c=n(12);var h=function(){function e(){}var t=e.prototype;return t.parse=function(e){try{var t=this;return Promise.resolve(fetch(e)).then((function(e){return Promise.resolve(e.text()).then((function(e){var n=e.split("==========").map(t.parseHighlight).filter((function(e){return!1!==e})),r={};return n.forEach((function(e){var t,n=e.title;void 0===r[n]?(t=[],r[n]=t):t=r[n],t.push({metadata:e.metadata,text:e.text})})),r}))}))}catch(n){return Promise.reject(n)}},t.parseHighlight=function(e){var t=e.trim().split("\n"),n=t[0].trim(),r=t[1],i=t.slice(2);return!(0===n.length||!r.startsWith("- Your Highlight"))&&(void 0!==i&&(i=i.join("\n").trim()),{title:n,metadata:r,text:i})},t.groupHighlights=function(e){var t={};return e.forEach((function(e){var n,r=e.title;void 0===t[r]?(n=[],t[r]=n):n=t[r],n.push({metadata:e.metadata,text:e.text})})),t},e}(),u=function(e){var t,n;function a(t){var n;return(n=e.call(this)||this).state={selectedBook:"Select",selectedBookHighlights:[],highlightsTable:{},url:t.url},n.handleClick=n.handleClick.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.getHighlightsTable=function(){try{var e=this,t=new h;return Promise.resolve(t.parse(e.state.url)).then((function(t){e.setState((function(e){return{highlightsTable:t}}))}))}catch(n){return Promise.reject(n)}},o.componentDidMount=function(){this.getHighlightsTable(),this.getHighlights("Select")},o.handleClick=function(e){console.log(e.currentTarget.textContent),this.getHighlights(e.currentTarget.textContent)},o.getHighlights=function(e){var t=this;this.setState((function(n){return{selectedBook:e,selectedBookHighlights:t.state.highlightsTable[e]?t.state.highlightsTable[e]:[]}}))},o.render=function(){var e=this,t=Object.keys(this.state.highlightsTable).length-5,n=void 0;t>0&&(n=i.a.createElement(l.a.Item,{onClick:this.handleClick,id:"bookdropdownMore",key:"bookdropdownMore",eventKey:"Select",disabled:"true"},"...there are more books. Type book name you are looking for."));var a=i.a.forwardRef((function(e,t){var a=e.children,o=e.style,l=e.className,s=e["aria-labelledby"],h=Object(r.useState)(""),u=h[0],d=h[1];return i.a.createElement("div",{ref:t,style:o,className:l,"aria-labelledby":s},i.a.createElement(c.a,{autoFocus:!0,className:"mx-3 my-2 w-auto",placeholder:"Type to filter...",onChange:function(e){return d(e.target.value)},value:u}),i.a.createElement("ul",{className:"list-unstyled"},i.a.Children.toArray(a).filter((function(e){return!u||e.props.children.toLowerCase().includes(u)})).slice(0,5),n))}));return i.a.createElement("div",null,i.a.createElement(l.a,null,i.a.createElement(l.a.Toggle,{id:"dropdown-custom-components"},this.state.selectedBook),i.a.createElement(l.a.Menu,{as:a},Object.keys(this.state.highlightsTable).map((function(t){return i.a.createElement(l.a.Item,{onClick:e.handleClick,id:"bookdropdown"+t,key:"bookdropdown"+t,eventKey:t},t)})))),i.a.createElement("br",null),this.state.selectedBookHighlights.map((function(e){return i.a.createElement(s.a,{body:!0},e.text)})))},a}(r.Component),d=(n(25),function(){return i.a.createElement(u,{url:"https://thisisrajiraj.github.io/posts/kindleclippings.txt"})});o.a.render(i.a.createElement(d,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.83d38f4b.chunk.js.map